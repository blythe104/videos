<!DOCTYPE HTML>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片裁剪</title>
    <link href="../../public/cropper/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../public/cropper/dist/cropper.css" rel="stylesheet">
    <link href="../../public/css/main.css" rel="stylesheet">
    <!--[if IE]>
    <script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->
</head>
<body>
<div class="htmleaf-container">
    <!-- Content -->
    <form id="upload_form" enctype="multipart/form-data" method="post" action="/api/common/upload">
        <div class="container">
            <div class="row">
                <div class="col-md-9">
                    <div class="img-container" style="padding-left: 0px;">
                        <img src="../../public/cropper/assets/img/init.png" alt="" style="width: 700px;">
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-md-9 docs-buttons">
                    <!-- <h3 class="page-header">Toolbar:</h3> -->
                    <div class="btn-group">

                        <button class="btn btn-primary" data-method="zoom" data-option="0.1" type="button" title="Zoom In">
                                <span class="docs-tooltip" data-toggle="tooltip">
                                    <span class="icon icon-zoom-in"></span>
                                </span>
                        </button>
                        <button class="btn btn-primary" data-method="zoom" data-option="-0.1" type="button" title="Zoom Out">
                                <span class="docs-tooltip" data-toggle="tooltip">
                                    <span class="icon icon-zoom-out"></span>
                                </span>
                        </button>
                        <button class="btn btn-primary" data-method="rotate" data-option="-45" type="button" title="Rotate Left">
                                <span class="docs-tooltip" data-toggle="tooltip">
                                    <span class="icon icon-rotate-left"></span>
                                </span>
                        </button>
                        <button class="btn btn-primary" data-method="rotate" data-option="45" type="button" title="Rotate Right">
                                <span class="docs-tooltip" data-toggle="tooltip" >
                                    <span class="icon icon-rotate-right"></span>
                                </span>
                        </button>
                    </div>


                    <div class="btn-group">
                        <!-- <h3 class="page-header">Toggles:</h3> -->
                        <div class="btn-group btn-group-justified" data-toggle="buttons" style="width: 230px;" >
                            <label class="btn btn-primary active" data-method="setAspectRatio" data-option="1"   >
                                <input class="sr-only" id="aspestRatio1" name="aspestRatio" value="1" type="radio">
                                    <span class="docs-tooltip" data-toggle="tooltip" >
                                        1:1
                                    </span>
                            </label>
                            <label class="btn btn-primary" data-method="setAspectRatio" data-option="1.3333333333333333" >
                                <input class="sr-only" id="aspestRatio2" name="aspestRatio" value="1.3333333333333333" type="radio">
                                    <span class="docs-tooltip" data-toggle="tooltip" >
                                        4:3
                                    </span>
                            </label>
                            <label class="btn btn-primary" data-method="setAspectRatio" data-option="0.6666666666666666" title="Set Aspect Ratio">
                                <input class="sr-only" id="aspestRatio4" name="aspestRatio" value="0.6666666666666666" type="radio">
                                    <span class="docs-tooltip" data-toggle="tooltip" title="长宽比2:3">
                                        2:3
                                    </span>
                            </label>
                            <label class="btn btn-primary" data-method="setAspectRatio" data-option="NaN" >
                                <input class="sr-only" id="aspestRatio5" name="aspestRatio" value="NaN" type="radio">
                                    <span class="docs-tooltip" data-toggle="tooltip" title="自由拖动">
                                        不限
                                    </span>
                            </label>
                        </div>

                        <div class="dropdown dropup docs-options">

                            <ul class="dropdown-menu" role="menu" aria-labelledby="toggleOptions">
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="strict" checked>
                                        strict
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="responsive" checked>
                                        responsive
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="checkImageOrigin" checked>
                                        checkImageOrigin
                                    </label>
                                </li>

                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="modal" checked>
                                        modal
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="guides" checked>
                                        guides
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="highlight" checked>
                                        highlight
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="background" checked>
                                        background
                                    </label>
                                </li>

                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="autoCrop" checked>
                                        autoCrop
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="dragCrop" checked>
                                        dragCrop
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="movable" checked>
                                        movable
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="resizable" checked>
                                        resizable
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="rotatable" checked>
                                        rotatable
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="zoomable" checked>
                                        zoomable
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="touchDragZoom" checked>
                                        touchDragZoom
                                    </label>
                                </li>
                                <li role="presentation">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" name="option" value="mouseWheelZoom" checked>
                                        mouseWheelZoom
                                    </label>
                                </li>
                            </ul>
                        </div><!-- /.dropdown -->
                    </div><!-- /.docs-toggles -->
                    <label class="btn btn-primary btn-upload" for="inputImage" title="Upload image file">
                        <input class="sr-only" id="inputImage" name="image_file" type="file" accept="image/*">
                            <span class="docs-tooltip" data-toggle="tooltip">
                                <span class="">选择文件</span>
                            </span>
                    </label>
                    <input type="submit" value="上传截图" class="btn" />
                </div>
                <div class="docs-data" style="display: none;">
                    <div class="input-group">
                        <label class="input-group-addon" for="dataX">X</label>
                        <input class="form-control" id="dataX" name="x1" type="text" placeholder="x">
                        <span class="input-group-addon">px</span>
                    </div>
                    <div class="input-group">
                        <label class="input-group-addon" for="dataY">Y</label>
                        <input class="form-control" id="dataY" name="y1" type="text" placeholder="y">
                        <span class="input-group-addon">px</span>
                    </div>
                    <div class="input-group">
                        <label class="input-group-addon" for="dataWidth">Width</label>
                        <input class="form-control" id="dataWidth" name="w"  type="text" placeholder="width">
                        <span class="input-group-addon">px</span>
                    </div>
                    <div class="input-group">
                        <label class="input-group-addon" for="dataHeight">Height</label>
                        <input class="form-control" id="dataHeight" name="h" type="text" placeholder="height">
                        <span class="input-group-addon">px</span>
                    </div>
                    <div class="input-group">
                        <label class="input-group-addon" for="dataRotate">Rotate</label>
                        <input class="form-control" id="dataRotate" type="text" placeholder="rotate">
                        <span class="input-group-addon">deg</span>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" name="day" id="day" value=""/>
        <input type="hidden" name="item" id="item"  value=""/>
        <input type="hidden" name="type" id="type"  value=""/>
    </form>
    </div>
    <!-- Alert -->
    <script src="../../public/js/jquery.min.js"></script>
    <script src="../../public/cropper/assets/js/bootstrap.min.js"></script>
    <script src="../../public/cropper/dist/cropper.js"></script>
    <script src="../../public/js/main.js"></script>

    <script>
        var class_day = $(window.parent.document).find("#iframepage").attr("class_day");
        var class_item = $(window.parent.document).find("#iframepage").attr("class_item");
        var class_type = $(window.parent.document).find("#iframepage").attr("class_type");
        $("input:submit").attr('disabled', false);
        $("form").submit(function(){
            $('#day').val(class_day);
            $('#item').val(class_item);
            $('#type').val(class_type);
            var file = $("input:file[name='image_file']").val();
            if(file == ''){
                parent.toast.error('请选择图片');
                return false;
            }else{
                $("input:submit").attr('disabled', true);
                //parent.toast.showLoading();
                $(this).submit();
            }
        });
    </script>
</body>
</html>